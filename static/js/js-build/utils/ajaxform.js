define(["jquery","json"],function(){$.fn.identalk_ajaxform=function(e){var t={url:undefined,type:"POST",dataType:"json",addData:undefined,checklist:null},n=$.extend({},t,e);return this.each(function(){var e=$(this);n.url===undefined&&(n.url=e.attr("action"));var t=e.serializeArray(),r={};for(var i=0;i<t.length;i++)r[t[i].name]=t[i].value;if(n.checklist!==null){var s=n.checklist.split(",");for(var i=0;i<s.length;i++){var o=[],u=$(':checkbox[name="'+s[i]+'"]:checked');for(var a=0;a<u.length;a++)o.push(u[a].value);r[s[i]]=o.toString()}}var f=n.addData;f!==undefined&&typeof f=="object"&&(r=$.extend(r,f)),$.ajax({url:n.url,type:n.type,dataType:n.dataType,data:{data:$.toJSON(r)},success:function(e){if(n.callback===undefined)return;n.callback(e)},error:function(e){if(n.onerror===undefined)return;n.onerror(e)}})}),this}});